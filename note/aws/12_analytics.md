# 分析サービス


## 目次

1. [EMR](#emr)
	1. [分散処理基盤としてのEMR](#分散処理基盤としてのemr)
	1. [分散処理アプリケーション基盤としてのEMR](#分散処理アプリケーション基盤としてのemr)
1. [ETLツール](#etlツール)
	1. [Kinesis](#kinesis)
	1. [Data Pipeline](#data-pipeline)
	1. [Glue](#glue)
1. [その他の分析サービス](#その他の分析サービス)
	1. [Amazon Athena](#amazon-athena)
	1. [Amazon QuickSight](#amazon-quicksight)


## EMR

**Amazon EMR**（Elastic MapReduce）は分散処理フレームワークのサービス。マスタノード、コアノード、タスクノードから構成される。

**マスタノード**はコアノード、タスクノードにジョブを振り分ける役割のノードである。

**コアノード**と**タスクノード**はどちらも実際のジョブを実行するノードで、コアノードはデータを保存する領域である**HDFS**（Hadoop Distributed File System）を持つ（構成が[Redshift](./07_database.md#redshift)と類似している）。

### 分散処理基盤としてのEMR

EMRの用途の1つとして、**分散処理基盤**がある。これは、分散処理に必要なEC2の調達・廃棄などのリソースの調整機能と、S3を分散処理に扱いやすいストレージとして利用する機能（EMRFS）を組み合わせたものである。

リソースの調達機能として重要となるのが、伸縮自在性とコストである。伸縮自在性を実現するために、処理するEC2インスタンスを解析開始時に調達し、必要に応じて増減させる機能がある。コストの観点でも、EMRには分析費用を小さくするための機能（スポットインスタンスのオプションなど）がある。

例えば、マスタサーバにオンデマンドインスタンスを割り当て、コアサーバにスポットインスタンスを用いる構成は最適なケースとなることが多い。

### 分散処理アプリケーション基盤としてのEMR

EMRでは**分散処理アプリケーション**として、**Hadoop**（大規模データの蓄積・分析を分散処理技術によって実現するオープンソースのミドルウェア）やHadoop上で動く多数のフレームワークが利用可能である。代表例として、Apache Spark、HBase、Presto、Flinkなどがある。事前に用意されているこれらのアプリケーションを**サポートアプリケーション**と呼ぶ。自分で用意した**カスタムアプリケーション**を用いることもできる。


## ETLツール

**ETLツール**（Extract Transform Load）は、データソースからのデータの抽出・変換・投入の役割を果たす。AWSにはELTツールとして、**Kinesis**、**Data Pipeline**、**Glue**などがある。

### Kinesis

**Amazon Kinesis**は、AWSが提供するストリーミング処理プラットフォーム。センサやログなどのデータを、リアルタイム/準リアルタイムで処理する**Data Streams**と**Data Firehose**、動画を処理する**Video Streams**、収集したデータを可視化・分析する**Data Analytics**といった機能がある。

### Data Pipeline

**AWS Data Pipeline**は、データ処理やデータ移動を支援するサービス。パイプラインを設定すると、オンプレミスやAWS上の特定の場所に定期的にアクセスし、必要に応じてデータを変換して[S3](06_storage.md#s3)、[RDS](./07_database.md#rds)、[DynamoDB](./07_database.md#dynamodb)などのAWSの各種サービスに転送することができる。

### Glue

**AWS Glue**は、データレイクやデータウェアハウスとセットで使われることが多い、サーバレス型のELTツール。ビッグデータの解析などに使われることが多く、[S3](./06_storage.md#s3)のデータを管理して[Redshift](./07_database.md#redshift)などに変換して格納するといった用途によく利用される。

データソースのデータを探索する**クローラ機能**と、それをメタデータとして管理する**データカタログ機能**がある。また、データの変換は**ジョブ**という単位で管理され、変換処理はPythonやSparkによって自分で実装することができる。


## その他の分析サービス

### Amazon Athena

**Amazon Athena**は[S3](./06_storage.md#s3)内のデータを直接分類できるようにする対話型のクエリサービス。S3のデータに対して、標準SQLでデータの操作ができる。

### Amazon QuickSight

**Amazon QuickSight**はデータの可視化ツール。簡単にダッシュボードを作成することができ、ダッシュボードはブラウザ経由で閲覧することができる。
