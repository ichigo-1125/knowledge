# Git flowの運用


## メインブランチ

### main

- 分岐元: なし
- マージ先: なし
- ブランチ名の例: main
- 特徴
	- 本番にリリースできる状態を保つ
	- 直接コミットは行わない
		- release 、hotfixからマージを行い、タグを作成する
		- タグ名は vX.Y.Z

### develop

- 分岐元: main
- マージ先: なし
- ブランチ名の例: develop
- 特徴
	- 開発中の最新状態を反映する
	- 基本、直接コミットは行わない
		- feature, hotfixからマージを行う


## サポートブランチ

### feature

- 分岐元: develop
- マージ先: develop
- ブランチ名の例: feature-\*
- 特徴
	- 新機能の開発を行うのに用いる
	- リモートへプッシュせず、ローカルでのみ利用する
		- Pull Requestも活用するのであれば、プッシュしても良い

### release

- 分岐元: develop
- マージ先: mainとdevelop
- ブランチ名の例: release-vX.Y.Z
- 特徴
	- リリースの準備作業を行うのに用いる
		- バージョンの変更
		- 小さなバグフィックス
	- mainへマージ後、developへマージする
		- 完了後、releaseを削除する

### hotfix

- 分岐元: main
- マージ先: mainとdevelop
- ブランチ名の例: hotfix-\*
- 特徴
	- 緊急のバグフィックスを行うのに利用する
	- mainへマージ後、developへマージする
	- 完了後、hotfixを削除する
		- 利用用途としてはreleaseに似ているが、developを経由せずにmainへマージできるため進行中の開発が影響を受けにくい


## 運用手順

1. mainブランチからdevelopブランチを作成する。
1. ローカルの作業において、developブランチからfeatureブランチを作成する。
1. featureブランチへのコミットはローカルで行い、リモートにはpushしない。ある程度作業が進んだら、リモートからdevelopブランチをぷるしておき、featureブランチにdevelopブランチをマージする。
1. 問題なくマージできたら、developブランチにfeatureブランチをマージ（必要に応じてプルリクエスト）して、リモートにプッシュする。
1. リリースの際にはreleaseブランチを作成し、リリース作業を行う。releaseブランチはリモートにはプッシュしない。
1. リリース作業が完了したら、mainブランチとdevelopブランチにreleaseブランチをマージしてリモートにプッシュする。
1. releaseブランチを削除する。
1. mainブランチのリリースコミットにタグをつける。
1. 緊急修正対応においては、mainブランチからhotfixブランチを作成し、修正を行う。hotfixブランチはリモートにはプッシュしない。
1. 修正が完了したら、mainブランチにhotfixブランチをマージし、リモートにプッシュする。
1. hotfixブランチを削除する。
